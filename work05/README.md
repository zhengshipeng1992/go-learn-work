#### redis自带性能测试工具redis-benchmark的使用

| 选项          | 描述                                     | 默认值    |
| ------------- | ---------------------------------------- | --------- |
| -h            | 指定服务器主机名                         | 127.0.0.1 |
| -p            | 指定服务器端口                           | 6379      |
| -s            | 指定服务器socket                         |           |
| -c            | 指定并发连接数                           | 50        |
| -n            | 指定请求数                               | 100000    |
| -d            | 以字节的形式指定get，set数据的大小       | 2         |
| -k            | 1=keep alive, 0=reconnect                | 1         |
| -r            | Set/get/incr使用随机key，sadd使用随机值  |           |
| -P            | 通过管道传输请求                         |           |
| -q            | 强制退出redis。仅显示query/sec值         |           |
| --csv         | 以csv格式输出                            |           |
| -l（L的小写） | 生成循环，永久执行测试                   |           |
| -t            | 仅运行以逗号分隔的测试命令列表           |           |
| -I(i的大写)   | Idle 模式。仅打开 N 个 idle 连接并等待。 |           |

#### 使用 redis benchmark 工具, 测试 10 20 50 100 200 1k 5k 字节 value 大小，redis get set 性能

```
redis-benchmark -d 10 -t get,set
redis-benchmark -d 20 -t get,set
redis-benchmark -d 50 -t get,set
redis-benchmark -d 100 -t get,set
redis-benchmark -d 200 -t get,set
redis-benchmark -d 1000 -t get,set
redis-benchmark -d 5000 -t get,set
```

##### Set

| 字节 | 执行次数(100000)和耗时 | 每秒请求次数 | avg   | min   | P50   | p95   | P99   | max   |
| ---- | ---------------------- | ------------ | ----- | ----- | ----- | ----- | ----- | ----- |
| 10   | 1.16 seconds           | 86281.27     | 0.304 | 0.104 | 0.271 | 0.519 | 0.879 | 4.287 |
| 20   | 1.09 seconds           | 91575.09     | 0.285 | 0.080 | 0.271 | 0.415 | 0.695 | 1.783 |
| 50   | 1.14 seconds           | 87873.46     | 0.298 | 0.096 | 0.271 | 0.479 | 0.815 | 1.887 |
| 100  | 1.04 seconds           | 95785.44     | 0.272 | 0.104 | 0.263 | 0.383 | 0.479 | 1.327 |
| 200  | 1.07 seconds           | 93109.87     | 0.285 | 0.088 | 0.263 | 0.415 | 0.695 | 2.631 |
| 1000 | 1.12 seconds           | 88888.89     | 0.297 | 0.120 | 0.279 | 0.439 | 0.695 | 2.007 |
| 5000 | 1.16 seconds           | 85984.52     | 0.305 | 0.128 | 0.287 | 0.439 | 0.759 | 2.487 |

##### Get

| 字节 | 执行次数(100000)和耗时 | 每秒请求次数 | avg   | min   | P50   | p95   | P99   | max   |
| ---- | ---------------------- | ------------ | ----- | ----- | ----- | ----- | ----- | ----- |
| 10   | 1.03 seconds           | 96618.36     | 0.270 | 0.080 | 0.263 | 0.383 | 0.479 | 1.319 |
| 20   | 1.08 seconds           | 92678.41     | 0.282 | 0.088 | 0.263 | 0.423 | 0.695 | 1.671 |
| 50   | 1.04 seconds           | 95969.28     | 0.272 | 0.072 | 0.263 | 0.383 | 0.471 | 1.591 |
| 100  | 1.05 seconds           | 94966.77     | 0.237 | 0.048 | 0.263 | 0.383 | 0.479 | 1.463 |
| 200  | 1.07 seconds           | 93808.63     | 0.277 | 0.080 | 0.271 | 0.383 | 0.487 | 1.223 |
| 1000 | 1.21 seconds           | 90497.73     | 0.288 | 0.088 | 0.271 | 0.407 | 0.639 | 2.471 |
| 5000 | 1.17 seconds           | 85689.80     | 0.305 | 0.072 | 0.287 | 0.431 | 0.575 | 1.367 |

